{{- if and (.Values.export.enabled) (eq .Values.export.mode "file") }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "egressd.fullname" . }}
  labels:
    {{- include "egressd.labels" . | nindent 4 }}
data:
  vector-config.yaml: {{- toYaml .Values.export.file.vectorConfig | nindent 8 }}
{{- end }}
